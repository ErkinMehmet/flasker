{% extends 'base.html' %}

{% block content %}

{% for message in get_flashed_messages() %}
<div class="alert alert-success alert-dismissible fade show" role="alert">
    {{message}}
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
</div>
{% endfor %}

<!-- Blog Card Container -->
<div class="card shadow p-3 mb-5 bg-body rounded">
  <div class="card-body">
      <h4 class="card-title">Blog</h4>
      <hr />
      <br />
      {% for post in posts %}
      <div class="shadow p-3 mb-5 bg-body rounded">
          <div class="d-flex justify-content-between align-items-start">
              <!-- Post Information -->
              <div>
                  <h5 class="post-title-link"> <a href="{{url_for('post_bp.post',id=post.id)}}">{{post.title}}</a></h5>
                  <small>{{post.poster.name}} - {{post.date_posted}}</small><br/>
                  {{post.slug}}<br/>
              </div>

              <!-- Buttons on the Right -->
              <div class="d-flex flex-column align-items-end ml-3">
                <a href="{{url_for('post_bp.post',id=post.id)}}" class="btn btn-outline-primary btn-sm mb-2">Visualiser</a>
                
                {% if post.poster_id == current_user.id %}
                <a href="{{url_for('post_bp.edit_post',id=post.id)}}" class="btn btn-outline-primary btn-sm mb-2">Ã‰diter</a>
                <a href="{{url_for('post_bp.delete_post',id=post.id)}}" class="btn btn-outline-danger btn-sm">Supprimer</a>
                {% endif %}
              </div>
          </div>
      </div>
      <hr />
      {% endfor %}
  </div>
</div>


{% endblock %}
